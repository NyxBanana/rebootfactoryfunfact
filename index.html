<!DOCTYPE html>
<html lang="fr">
<head>
	<title>FunFact</title>
	<meta charset="UTF-8" />
	<meta name="viewport" content="initial-scale=1.0" />
	<link rel="stylesheet" href="_styles/styles.css" />
	<link href='http://fonts.googleapis.com/css?family=Roboto:400,100,700' rel='stylesheet' type='text/css'>
</head>
<body>
	<header>
		<h1 class="head"><a href="#home"><span class="fun">Fun</span>fact</a></h1>

		<button class="btn--openfilter"><div class="icon icon--filters"> </div></button>
		<button class="btn--openprofile"><div class="icon icon--profile"> </div></button>
	</header>

	<main>

		<div class="blackFilter unsee"></div>
		<section class="section__filter">
				<ul class="filters">
					<li><button class="filters__sport"><div class="icon iconFilters icon--sportW"></div>Sport</button></li>
					<li><button class="filters__art"><div class="icon iconFilters icon--artW"></div>Art</button></li>
					<li><button class="filters__culture"><div class="icon iconFilters icon--cultureW"></div>Culture</button></li>
					<li><button class="filters__cinema"><div class="icon iconFilters icon--cinemaW"></div>Tv/Cinéma</button></li>
					<li><button class="filters__sciences"><div class="icon iconFilters icon--sciencesW"></div>Sciences</button></li>
					<li><button class="filters__history"><div class="icon iconFilters icon--historyW"></div>Histoire</button></li>
					<li><button class="filters__world"><div class="icon iconFilters icon--worldW"></div>Monde</button></li>
					<li><button class="filters__celebrities"><div class="icon iconFilters icon--celebrityW"></div>Célébrités</button></li>
					<li><button class="filters__fails"><div class="icon iconFilters icon--failsW"></div>Fails</button></li>
				</ul>
		</section>

		<section id="home" class="section section__home">
			<article class="article article__fact">
				<p class="category"></p>
				<button class="menuFact icon icon--factmenu clearfix"></button>
				<p class="fact"></p>
				<button class="btn--swipeFact icon icon--swipeFact"></button>
			
				<div class="infofact clearfix">
					<button class="btn--addToFav icon icon--favempty"></button>

					<ul>
						<li class="author"></li>
						<li class="source"></li>
					</ul>
				</div>
			</article>

			<div class="footPA">
				<button class="addfact">+</button>
			</div>
		</section>

		<section id="addFact" class="section section__addFact unsee">
			<form action="" method="post" class="form--addafact">
	       		<fieldset>
	       			<input class="fact--add" name="fact--src" type="text" value="" placeholder="Pseudo"></input>

		            <select class="categorie" name="categorie" size="1">
		                <option value="" disabled selected>Catégorie</option>
		                <option value="sport">Sport</option>
		                <option value="cinema">Cinéma</option>
		                <option value="culture">Culture</option>
		                <option value="art">Art</option>                    
		                <option value="monde">Monde</option>
		                <option value="celebrite">Célébrité</option>
		                <option value="autre">Autre</option>
		            </select>
		            
		            <div class="triangle"></div>
		            
		            <textarea class="insertfact" name="fact" rows="1" cols="1" placeholder="Insérer votre fact"></textarea>
		            
		            <input class="fact--add" name="fact--src" type="text" value="" placeholder="Source (facultatif)"></input>
		            
		            <input class="validFact" tabindex="1" type="submit" value="v"/>
		            <div class="validfact--btn"></div>
		            <div class="validMessage unsee"><p>Votre fact a bien été ajouté.</p></div>
	       		</fieldset>
			</form>
		</section>

		<section id="profil" class="section section__profil">
			<ul>
				<li><button class="btn--myfact">Mes facts</button></li>
				<li><button class="btn--fav">Mes favoris</button></li>
			</ul>

			<div class="section section__fav">
				<article class="article article__fact">
					<p class="factfav">Techniquement, ce n’est pas la Seine mais l’Yonne qui coule à Paris.</p>
					<ul>
						<li>source</li>
						<li>author</li>
					</ul>

					<div class="options">
						<button class="btn--share">Share</button>
					</div>
				</article>
			</div>

			<div class="section__mesFacts">
				<article class="article article__fact">
					<p class="factperso">En Alabama, il est interdit de jouer aux dominos le dimanche.</p>
					<ul>
						<li>source</li>
					</ul>

					<div class="options">
						<button class="btn--share">Share</button>
					</div>
				</article>
			</div>
		</section>

	</main>
	<footer>
	</footer>

	<script src="_js/jquery-1.11.2.min.js"></script>
	<script src="_js/Hammer.JS-v2.0.4.js"></script>

	<script>
		
		if (location.hash === "") location.hash = "home";

		
		// Filters
		(function() {
			"use strict";
			var openFilter = document.getElementsByClassName("btn--openfilter")[0],
				filter = document.getElementsByClassName("section__filter")[0],
				catfilt = document.getElementsByClassName("filters")[0];

			openFilter.addEventListener("click", function() {
				filter.classList.toggle("filter--open");
				filter.classList.add("filter--transition");
				catfilt.classList.toggle("filterList--open");
				AddCascadeDelay(menu, 0.2);
			});

			filter.addEventListener("transitionend", function() {
				filter.classList.remove("filter--transition");
				
			});

		// Facts
		(function() {
			"use strict";
			/*var facts = document.querySelectorAll(".article__fact .fact");
			for (var i = 0; i < facts.length; i++) {
				facts[i].addEventListener("click", function() {
					var option = this.nextElementSibling.nextElementSibling;
					if (option !== void(0))
						option.classList.add("active");
				});
			}
			var options = document.querySelectorAll(".article__fact .options");
			for (i = 0; i < options.length; i++) {
				options[i].addEventListener("click", function() {
					this.classList.remove("active");
				});
			}*/
		})();

		// Forms
			"use strict";
			var floatlabels = document.getElementsByClassName("floatlabel");

			for (var i = 0; i < floatlabels.length; i++) {
				var input = floatlabels[i].getElementsByTagName("input")[0];
				var label = floatlabels[i].getElementsByTagName("label")[0];

				input.placeholder = label.innerText;

				input.addEventListener("input", function(e) {
					var label = this.previousElementSibling;

					if (this.value.length != 0)
						label.classList.add("visible");
					else
						label.classList.remove("visible");
				});
			}

		//AddFact
			"use strict";
			var floatlabels = document.getElementsByClassName("floatlabel");
			for (var i = 0; i < floatlabels.length; i++) {
				var input = floatlabels[i].getElementsByTagName("input")[0];
				var label = floatlabels[i].getElementsByTagName("label")[0];
				input.placeholder = label.innerText;
				input.addEventListener("input", function(e) {
					var label = this.previousElementSibling;
					if (this.value.length != 0)
						label.classList.add("visible");
					else
						label.classList.remove("visible");
				});
			}
		})();

		//AddFact Open/Close
		(function() {
			"use strict";
			var btnAdd = document.getElementsByClassName("addfact")[0],
				addBg = document.getElementsByClassName("addfact--btn")[0],
				btnVal = document.getElementsByClassName("validFact")[0],
				valBg = document.getElementsByClassName("validfact--btn")[0],
				targetHome = document.getElementsByClassName("section__home")[0],
				targetAddFact = document.getElementsByClassName("section__addFact")[0],
				goHome = document.getElementsByClassName("goHome")[0],
				validMessage = document.getElementsByClassName("validMessage")[0],
				blackFilter = document.getElementsByClassName("blackFilter")[0];
				goHome.addEventListener("click", function() {
					if (targetHome.classList.contains("unsee")) {
						targetHome.classList.remove("unsee");
					}
					if (addBg.classList.contains("addFact--open")) {
						addBg.classList.remove("addFact--open");
						addBg.classList.remove("addFact--transition");
					}
					if (btnAdd.classList.contains("btnAdd--gone")) {
						btnAdd.classList.remove("btnAdd--gone");
					}
					if (!targetAddFact.classList.contains("unsee")) {
						targetAddFact.classList.add("unsee");
					}
					valBg.classList.remove("valBg--close");
					btnVal.classList.remove("btnVal--open");
				})
				btnAdd.addEventListener("click", function() {
					addBg.classList.add("addFact--open");
					addBg.classList.add("addFact--transition");
					btnAdd.classList.add("btnAdd--gone");
					btnAdd.classList.add("btnAdd--transition");
				});
				addBg.addEventListener("transitionend", function() {
					setTimeout(function(){
						location.hash = "addFact";
						btnAdd.classList.remove("btnAdd--transition");
						targetHome.classList.add("unsee");
						targetAddFact.classList.remove("unsee");
						valBg.classList.add("valBg--close"); 
						valBg.classList.add("valBg--transition");
						btnVal.classList.add("btnVal--open"); //ouverture du bouton V
						btnVal.classList.add("btnVal--transition");
					}, 200);	
				});
				valBg.addEventListener("transitionend", function() {
					valBg.classList.remove("valBg--transition");
					btnVal.classList.remove("btnVal--transition");
					valBg.classList.add("valBg--bounce");
					valBg.classList.add("valBg--bounceTransition");
				});
				btnVal.addEventListener("click", function() {
					validMessage.classList.add("validMessage--open"); //attention, il est en unsee, il aura donc besoin que tu ajoute le changement d'opacité dans la transition
					validMessage.classList.add("validMessage--transition");
					blackFilter.classList.add("blackFilter--open"); //pareil que validMessage, il est en unsee de base
					blackFilter.classList.add("blackFilter--transition");
				});
				validMessage.addEventListener("transitionend", function() {
					setTimeout(function() {
						validMessage.classList.remove("validMessage--open");
						blackFilter.classList.remove("blackFilter--open");
					})
				}, 800);
				validMessage.addEventListener("transitionend", function() {
					setTimeout(function() {
						validMessage.classList.remove("validMessage--transition");
						blackFilter.classList.remove("blackFilter--transition");
					})
				}, 800); //il faudra changer le temps ici pas celui de la transition
		})();


	var facts = [
		{
			category : "sport", 
			text : "A Detroit, un homme de 41 ans est mort noyé dans 50cm d’eau après avoir passé la tête dans une bouche d’égout et s’être bloqué… en cherchant ses clés de voiture.",
			source : "Darwin Award",
			author : "NyxBanana"
		},
		{
			category : "fails", 
			text : "A Paris, une poubelle est considérée comme une arme mortelle.",
			source : "htt://",
			author : "XynPapple"
		},
		{
			category : "history", 
			text : "Le terme OK  vient de la Guerre de Sécession : tous les jours, ils compilaient le nombre de morts dans un registre en indiquant le nombre de tués à coté d'un K pour 'Killed', ce qui donnait 25K 12K etc... Les bons jours sont ceux où l'on avait aucun mort, soit 0 K, devenu par la suite OK.",
			source : "htt://",
			author : "XynPapple"
		},
		{
			category : "world", 
			text : "En Alabama, il est illégal de porter une fausse moustache qui puisse causer des rires à l’église.",
			source : "htt://",
			author : "NyxBanana"
		},
		{
			category : "world",
			text : "Un milliard de Chinois se partagent 100 noms de famille.",
			source : "htt://",
			author : "NyxBanana"
		},
		{
			category : "culture", 
			text : "Jésus est né vers l’an 7 ou 5 avant Jésus-Christ.",
			source : "htt://",
			author : "NyxBanana"
		},
		{
			category : "culture", 
			text : "L’inventeur du Coca-Cola s’est inspiré d’un vin français à la coca.",
			source : "htt://",
			author : "NyxBanana"
		},
		{
			category : "fails", 
			text : "En France, il est interdit d’appeler un cochon Napoléon.",
			source : "htt://",
			author : "XynPapple"
		},
		{
			category : "world", 
			text : "Au Royaume-uni, un homme peut uriner en public mais uniquement sur la roue arrière d’un véhicule motorisé sur lequel il aura préalablement posé sa main droite.",
			source : "htt://",
			author : "NyxBanana"
		},
	];

	/*var randomFact = Math.floor(Math.random() * facts.length);*/
	var currentFact = 0;
	
	
	$(".article__fact .fact").html(facts[currentFact].text);
	$(".article__fact .source").html(facts[currentFact].source);
	$(".article__fact .author").html(facts[currentFact].author); 
	$(".article__fact .category").html(facts[currentFact].category); 

	function AddDelay(node, delay)
	{
		node.style.transitionDelay = delay + 's';
		node.style.WebkitTransitionDelay = delay + 's';
	}
	
	function AddCascadeDelay(node, cascadeDelay)
	{
		childs = node.children;
		for (i = 0; i < childs.length; i++)
		{
			AddDelay(childs[i], i * cascadeDelay);
		}
	}

	</script>

	
</body>
</html>
