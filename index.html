<!DOCTYPE html>
<html lang="fr">
<head>
	<title>FunFact</title>
	<meta charset="UTF-8" />
	<meta name="viewport" content="initial-scale=1.0" />
	<link rel="stylesheet" href="_styles/styles.css" />
	<link href='http://fonts.googleapis.com/css?family=Roboto:400,100,700' rel='stylesheet' type='text/css'>
</head>
<body>
	<header>
		<h1 class="head"><a href="#home" class="goHome"><span class="normal">Fun</span>fact</a></h1>

		<button class="btn--openfilter">Filtres</button>
	</header>

	<main>

		<div class="blackFilter unsee"></div>
		<section class="section__filter">
				<ul class="filters">
					<li><button class="filters__sport">Sport</button></li>
					<li><button class="filters__art">Art</button></li>
					<li><button class="filters__culture">Culture</button></li>
					<li><button class="filters__cinema">Tv/Cinéma</button></li>
					<li><button class="filters__sciences">Sciences</button></li>
					<li><button class="filters__histoiry">Histoire</button></li>
					<li><button class="filters__world">Monde</button></li>
					<li><button class="filters__celebrities">Célébrités</button></li>
					<li><button class="filters__fails">Fails</button></li>
				</ul>
		</section>

		<section id="home" class="section section__home">
			<article class="article article__fact">
				<p class="fact">En Alabama, il est interdit de jouer aux dominos le dimanche.</p>
				<ul>
					<li><a href="#">source</a></li>
					<li><a href="#">user</a></li>
				</ul>
			</article>

			<button class="addfact">+</button>
			<div class="addfact--btn"></div>
		</section>

		<section id="addFact" class="section section__addFact unsee">
			<form action="" method="post" class="form--addafact">
	       		<fieldset>
	       			<input class="fact--add" name="fact--src" type="text" value="" placeholder="Pseudo"></input>

		            <select class="categorie" name="categorie" size="1">
		                <option value="" disabled selected>Catégorie</option>
		                <option value="sport">Sport</option>
		                <option value="cinema">Cinéma</option>
		                <option value="culture">Culture</option>
		                <option value="art">Art</option>                    
		                <option value="monde">Monde</option>
		                <option value="celebrite">Célébrité</option>
		                <option value="autre">Autre</option>
		            </select>
		            
		            <div class="triangle"></div>
		            
		            <textarea class="insertfact" name="fact" rows="1" cols="1" placeholder="Insérer votre fact"></textarea>
		            
		            <input class="fact--add" name="fact--src" type="text" value="" placeholder="Source (facultatif)"></input>
		            
		            <input class="validFact" tabindex="1" type="submit" value="v"/>
		            <div class="validfact--btn"></div>
		            <div class="validMessage unsee"><p>Votre fact a bien été ajouté.</p></div>
	       		</fieldset>
			</form>
		</section>

		<section id="profil" class="section section__profil">
			<input class="pseudo" name="pseudo" type="text"  value="" placeholder="Pseudo"></input>
			
			<button>Mes Facts</button>
			<button>Mes Favoris</button>

			<div id="fav" class="section section__fav">
				<article class="article article__fact">
					<p class="fact">Techniquement, ce n’est pas la Seine mais l’Yonne qui coule à Paris.</p>
					<ul>
						<li><a href="#">source</a></li>
						<li><a href="#">user</a></li>
					</ul>

					<div class="options">
						<button class="btn--share">Share</button>
					</div>
				</article>

				<article class="article article__fact">
					<p class="fact">En Alabama, mettre du sel sur une voie ferrée peut être passible de la peine de mort.</p>
					<ul>
						<li><a href="#">source</a></li>
						<li><a href="#">user</a></li>
					</ul>

					<div class="options">
						<button class="btn--share">Share</button>
					</div>
				</article>

				<article class="article article__fact">
					<p class="fact">A Fairbanks, Alaska, il est illégal de donner de l’alcool à une souris.</p>
					<ul>
						<li><a href="#">source</a></li>
						<li><a href="#">user</a></li>
					</ul>

					<div class="options">
						<button class="btn--share">Share</button>
					</div>
				</article>
			</div>

			<div id="mesFacts" class="section section__mesFacts">
				<article class="article article__fact">
					<p class="fact">En Alabama, il est interdit de jouer aux dominos le dimanche.</p>
					<ul>
						<li><a href="#">source</a></li>
					</ul>

					<div class="options">
						<button class="btn--share">Share</button>
					</div>
				</article>

				<article class="article article__fact">
					<p class="fact">Jésus-Christ est né vers l'an 7 avant Jésus-Christ</p>
					<ul>
						<li><a href="#">source</a></li>
					</ul>

					<div class="options">
						<button class="btn--share">Share</button>
					</div>
				</article>

				<article class="article article__fact">
					<p class="fact">La république de Macédoine n'a pas le droit de s'appeller ainsi</p>
					<ul>
						<li><a href="#">source</a></li>
					</ul>

					<div class="options">
						<button class="btn--share">Share</button>
					</div>
				</article>
			</div>
		</section>

	</main>
	<footer>
	</footer>

	<script>
	
		
		if (location.hash === "") location.hash = "home";
		// Filters
		(function() {
			"use strict";
			var openFilter = document.getElementsByClassName("btn--openfilter")[0],
				filter = document.getElementsByClassName("section__filter")[0],
				catfilt = document.getElementsByClassName("filters")[0];
			openFilter.addEventListener("click", function() {
				filter.classList.toggle("filter--open");
				filter.classList.add("filter--transition");
				catfilt.classList.toggle("filterList--open");
				catfilt.classList.add("filterList--transition");
			});
			filter.addEventListener("transitionend", function() {
				filter.classList.remove("filter--transition");
				catfilt.classList.remove("filterList--transition");
			});
		})();
		// Facts
		(function() {
			"use strict";
			var facts = document.querySelectorAll(".article__fact .fact");
			for (var i = 0; i < facts.length; i++) {
				facts[i].addEventListener("click", function() {
					var option = this.nextElementSibling.nextElementSibling;
					if (option !== void(0))
						option.classList.add("active");
				});
			}
			var options = document.querySelectorAll(".article__fact .options");
			for (i = 0; i < options.length; i++) {
				options[i].addEventListener("click", function() {
					this.classList.remove("active");
				});
			}
		})();
		// Forms
		(function() {
			"use strict";
			var floatlabels = document.getElementsByClassName("floatlabel");
			for (var i = 0; i < floatlabels.length; i++) {
				var input = floatlabels[i].getElementsByTagName("input")[0];
				var label = floatlabels[i].getElementsByTagName("label")[0];
				input.placeholder = label.innerText;
				input.addEventListener("input", function(e) {
					var label = this.previousElementSibling;
					if (this.value.length != 0)
						label.classList.add("visible");
					else
						label.classList.remove("visible");
				});
			}
		})();
		//AddFact Open/Close
		(function() {
			"use strict";
			var btnAdd = document.getElementsByClassName("addfact")[0],
				addBg = document.getElementsByClassName("addfact--btn")[0],
				btnVal = document.getElementsByClassName("validFact")[0],
				valBg = document.getElementsByClassName("validfact--btn")[0],
				targetHome = document.getElementsByClassName("section__home")[0],
				targetAddFact = document.getElementsByClassName("section__addFact")[0],
				goHome = document.getElementsByClassName("goHome")[0],
				validMessage = document.getElementsByClassName("validMessage")[0],
				blackFilter = document.getElementsByClassName("blackFilter")[0];

				goHome.addEventListener("click", function() {
					if (targetHome.classList.contains("unsee")) {
						targetHome.classList.remove("unsee");
					}
					if (addBg.classList.contains("addFact--open")) {
						addBg.classList.remove("addFact--open");
						addBg.classList.remove("addFact--transition");
					}
					if (btnAdd.classList.contains("btnAdd--gone")) {
						btnAdd.classList.remove("btnAdd--gone");
					}
					if (!targetAddFact.classList.contains("unsee")) {
						targetAddFact.classList.add("unsee");
					}
					valBg.classList.remove("valBg--close");
					btnVal.classList.remove("btnVal--open");
				})

				btnAdd.addEventListener("click", function() {
					addBg.classList.add("addFact--open");
					addBg.classList.add("addFact--transition");
					btnAdd.classList.add("btnAdd--gone");
					btnAdd.classList.add("btnAdd--transition");
				});

				addBg.addEventListener("transitionend", function() {
					setTimeout(function(){
						location.hash = "addFact";
						btnAdd.classList.remove("btnAdd--transition");
						targetHome.classList.add("unsee");
						targetAddFact.classList.remove("unsee");
						valBg.classList.add("valBg--close"); 
						valBg.classList.add("valBg--transition");
						btnVal.classList.add("btnVal--open"); //ouverture du bouton V
						btnVal.classList.add("btnVal--transition");
					}, 200);	
				});

				valBg.addEventListener("transitionend", function() {
					valBg.classList.remove("valBg--transition");
					btnVal.classList.remove("btnVal--transition");
					valBg.classList.add("valBg--bounce");
					valBg.classList.add("valBg--bounceTransition");
				});

				btnVal.addEventListener("click", function() {
					validMessage.classList.add("validMessage--open"); //attention, il est en unsee, il aura donc besoin que tu ajoute le changement d'opacité dans la transition
					validMessage.classList.add("validMessage--transition");
					blackFilter.classList.add("blackFilter--open"); //pareil que validMessage, il est en unsee de base
					blackFilter.classList.add("blackFilter--transition");
				});

				validMessage.addEventListener("transitionend", function() {
					setTimeout(function() {
						validMessage.classList.remove("validMessage--open");
						blackFilter.classList.remove("blackFilter--open");
					})
				}, 800);

				validMessage.addEventListener("transitionend", function() {
					setTimeout(function() {
						validMessage.classList.remove("validMessage--transition");
						blackFilter.classList.remove("blackFilter--transition");
					})
				}, 800); //il faudra changer le temps ici pas celui de la transition
		})();
	</script>
</body>
</html>